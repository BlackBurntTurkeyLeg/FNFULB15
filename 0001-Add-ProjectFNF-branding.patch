From fb46afc437e2319a1f22f1b9ee47db475ef6523f Mon Sep 17 00:00:00 2001
From: l1ttleO <l1ttleofficial@outlook.com>
Date: Sun, 26 Jun 2022 23:01:51 +0500
Subject: [PATCH] Add ProjectFNF branding

---
 Project.xml             |   5 +-
 README.md               | 105 +++++++++-------------------------------
 source/CreditsState.hx  |   6 +++
 source/Discord.hx       |   6 +--
 source/Main.hx          |   4 +-
 source/MainMenuState.hx |   5 ++
 source/OutdatedState.hx |   6 +--
 source/PlayState.hx     |   6 +++
 source/TitleState.hx    |  30 ++++++++++--
 9 files changed, 76 insertions(+), 97 deletions(-)

diff --git a/Project.xml b/Project.xml
index 901d96e..cff4464 100644
--- a/Project.xml
+++ b/Project.xml
@@ -2,7 +2,7 @@
 <project>
 	<!-- _________________________ Application Settings _________________________ -->
 
-	<app title="Friday Night Funkin': Psych Engine" file="PsychEngine" packageName="com.shadowmario.psychengine" package="com.shadowmario.psychengine" main="Main" version="0.2.8" company="ShadowMario" />
+	<app title="Friday Night Funkin': ProjectFNF" file="ProjectFNF" packageName="ru.l1ttleO.projectfnf" package="ru.l1ttleO.projectfnf" main="Main" version="0.2.8" company="l1ttleO" />
 
 	<!--Switch Export with Unique ApplicationID and Icon-->
 	<set name="APP_ID" value="0x0100f6c013bbc000" />
@@ -48,7 +48,8 @@
 	<define name="LUA_ALLOWED" if="desktop" />
 	<define name="ACHIEVEMENTS_ALLOWED" />
 	<define name="VIDEOS_ALLOWED" if="web || windows" unless="32bits"/>
-	<define name="PSYCH_WATERMARKS"/> <!-- DELETE THIS TO REMOVE WATERMARKS/DEV NAMES ON TITLE SCREEN -->
+	<define name="PROJECTFNF_WATERMARKS"/> <!-- DELETE THIS TO REMOVE WATERMARKS/DEV NAMES ON TITLE SCREEN -->
+	<define name="PSYCH_WATERMARKS" unless="PROJECTFNF_WATERMARKS"/> <!-- DELETE THIS TO REMOVE WATERMARKS/DEV NAMES ON TITLE SCREEN -->
 	<define name="TITLE_SCREEN_EASTER_EGG" if="officialBuild"/> <!-- DELETE THE if="officialBuild" for enabling this on an unofficial build -->
 	<define name="CRASH_HANDLER" if="desktop release" />
 
diff --git a/README.md b/README.md
index 7e67c5b..0525e88 100644
--- a/README.md
+++ b/README.md
@@ -1,28 +1,37 @@
-# Friday Night Funkin' - Psych Engine
-Engine originally used on [Mind Games Mod](https://gamebanana.com/mods/301107), intended to be a fix for the vanilla version's many issues while keeping the casual play aspect of it. Also aiming to be an easier alternative to newbie coders.
+# Friday Night Funkin' - ProjectFNF
 
-## Installation:
-You must have [the most up-to-date version of Haxe](https://haxe.org/download/), seriously, stop using 4.1.5, it misses some stuff.
 
-Follow a Friday Night Funkin' source code compilation tutorial, after this you will need to install LuaJIT.
+# Features
 
-To install LuaJIT do this: `haxelib git linc_luajit https://github.com/nebulazorua/linc_luajit` on a Command prompt/PowerShell
+* [All Psych Engine features](https://github.com/ShadowMario/FNF-PsychEngine/tree/0.5.1#features)
+* New gameplay options (moving camera on note hit, camera shake on miss, more information in score bar)
+* New modifiers (opponent notes doing damage, misses decreasing max health, karma system)
+* Quality of Life options and improvements (ability to disable miss anims and sounds, enable hit sounds, set custom camera zoom)
+* 'Max Optimization' graphics option to achieve maximum framerate
 
-...Or if you don't want your mod to be able to run .lua scripts, delete the "LUA_ALLOWED" line on Project.xml
+# Installation:
 
+Go [here](https://github.com/l1ttleO/ProjectFNF/releases/latest) and download the appropriate version for your OS
 
-If you get an error about StatePointer when using Lua, run `haxelib remove linc_luajit` into Command Prompt/PowerShell, then re-install linc_luajit.
+## Building:
+**You must have the most up-to-date version of Haxe (you *cannot* compile using 4.1.5)**
 
-If you want video support on your mod, simply do `haxelib install hxCodec` on a Command prompt/PowerShell
+Follow the [Friday Night Funkin' source code compilation tutorial](https://github.com/ninjamuffin99/Funkin#build-instructions)
+After this you will need to install LuaJIT (run `haxelib install linc_luajit` in a Command Prompt/Terminal)
 
-otherwise, you can delete the "VIDEOS_ALLOWED" Line on Project.xml
+# Discord server
+**https://discord.gg/BUgn9dGgB2**
+_____________________________________
+# Credits:
+* @l1ttleO - Main developer of ProjectFNF 2.0
+* @MagnusStrom - Original maintainer of ProjectFNF 1.0
+* @aflacc - Original author of ProjectFNF
+* @tr1zn - Beta testing
 
-## Credits:
+## Psych Engine Credits and Special Thanks
 * Shadow Mario - Coding
 * RiverOaken - Arts and Animations
 * bbpanzu - Assistant Coding
-
-### Special Thanks
 * shubs - New Input System
 * SqirraRNG - Chart Editor's Sound Waveform base code
 * iFlicky - Delay/Combo Menu Song Composer + Dialogue Sounds
@@ -31,73 +40,3 @@ otherwise, you can delete the "VIDEOS_ALLOWED" Line on Project.xml
 * Smokey - Spritemap Texture Atlas support
 * Cary - OG Resolution code
 * Nebula_Zorua - VCR Shader code
-_____________________________________
-
-# Features
-
-## Attractive animated dialogue boxes:
-
-![](https://user-images.githubusercontent.com/44785097/127706669-71cd5cdb-5c2a-4ecc-871b-98a276ae8070.gif)
-
-
-## Mod Support
-* Probably one of the main points of this engine, you can code in .lua files outside of the source code, making your own weeks without even messing with the source!
-* Comes with a Mod Organizing/Disabling Menu.
-
-
-## Atleast one change to every week:
-### Week 1:
-  * New Dad Left sing sprite
-  * Unused stage lights are now used
-### Week 2:
-  * Both BF and Skid & Pump does "Hey!" animations
-  * Thunders does a quick light flash and zooms the camera in slightly
-  * Added a quick transition/cutscene to Monster
-### Week 3:
-  * BF does "Hey!" during Philly Nice
-  * Blammed has a cool new colors flash during that sick part of the song
-### Week 4:
-  * Better hair physics for Mom/Boyfriend (Maybe even slightly better than Week 7's :eyes:)
-  * Henchmen die during all songs. Yeah :(
-### Week 5:
-  * Bottom Boppers and GF does "Hey!" animations during Cocoa and Eggnog
-  * On Winter Horrorland, GF bops her head slower in some parts of the song.
-### Week 6:
-  * On Thorns, the HUD is hidden during the cutscene
-  * Also there's the Background girls being spooky during the "Hey!" parts of the Instrumental
-
-## Cool new Chart Editor changes and countless bug fixes
-![](https://github.com/ShadowMario/FNF-PsychEngine/blob/main/docs/img/chart.png?raw=true)
-* You can now chart "Event" notes, which are bookmarks that trigger specific actions that usually were hardcoded on the vanilla version of the game.
-* Your song's BPM can now have decimal values
-* You can manually adjust a Note's strum time if you're really going for milisecond precision
-* You can change a note's type on the Editor, it comes with two example types:
-  * Alt Animation: Forces an alt animation to play, useful for songs like Ugh/Stress
-  * Hey: Forces a "Hey" animation instead of the base Sing animation, if Boyfriend hits this note, Girlfriend will do a "Hey!" too.
-
-## Multiple editors to assist you in making your own Mod
-![Screenshot_3](https://user-images.githubusercontent.com/44785097/144629914-1fe55999-2f18-4cc1-bc70-afe616d74ae5.png)
-* Working both for Source code modding and Downloaded builds!
-
-## Story mode menu rework:
-![](https://i.imgur.com/UB2EKpV.png)
-* Added a different BG to every song (less Tutorial)
-* All menu characters are now in individual spritesheets, makes modding it easier.
-
-## Credits menu
-![Screenshot_1](https://user-images.githubusercontent.com/44785097/144632635-f263fb22-b879-4d6b-96d6-865e9562b907.png)
-* You can add a head icon, name, description and a Redirect link for when the player presses Enter while the item is currently selected.
-
-## Awards/Achievements
-* The engine comes with 16 example achievements that you can mess with and learn how it works (Check Achievements.hx and search for "checkForAchievement" on PlayState.hx)
-
-## Options menu:
-* You can change Note colors, Delay and Combo Offset, Controls and Preferences there.
- * On Preferences you can toggle Downscroll, Middlescroll, Anti-Aliasing, Framerate, Low Quality, Note Splashes, Flashing Lights, etc.
-
-## Other gameplay features:
-* When the enemy hits a note, their strum note also glows.
-* Lag doesn't impact the camera movement and player icon scaling anymore.
-* Some stuff based on Week 7's changes has been put in (Background colors on Freeplay, Note splashes)
-* You can reset your Score on Freeplay/Story Mode by pressing Reset button.
-* You can listen to a song or adjust Scroll Speed/Damage taken/etc. on Freeplay by pressing Space.
diff --git a/source/CreditsState.hx b/source/CreditsState.hx
index ca5faa0..06b0a03 100644
--- a/source/CreditsState.hx
+++ b/source/CreditsState.hx
@@ -81,6 +81,12 @@ class CreditsState extends MusicBeatState
 		#end
 
 		var pisspoop:Array<Array<String>> = [ //Name - Icon name - Description - Link - BG Color
+			['ProjectFNF Team'],
+			['l1ttleO',             'none',             'Main Programmer of ProjectFNF',                       		'https://twitter.com/l1ttleO',          '00FFF7'],
+			['ProjectFNF Contributors'],
+			['BeastlyGhost',        'none',             'Cool new options and fixes',                               'https://twitter.com/Fan_de_RPG',       'CCDFFD'],
+			['OneShotSank',         'none',             'Main menu changes',                                  		'https://twitter.com/Scridescriptive',  'EFB66C'],
+			['Stilic',              'none',             'Minor changes',                                     	    'https://github.com/Stilic',            'FF2D32'],
 			['Psych Engine Team'],
 			['Shadow Mario',		'shadowmario',		'Main Programmer of Psych Engine',							'https://twitter.com/Shadow_Mario_',	'444444'],
 			['RiverOaken',			'river',			'Main Artist/Animator of Psych Engine',						'https://twitter.com/RiverOaken',		'B42F71'],
diff --git a/source/Discord.hx b/source/Discord.hx
index adb081b..b4dc9a9 100644
--- a/source/Discord.hx
+++ b/source/Discord.hx
@@ -17,7 +17,7 @@ class DiscordClient
 	{
 		trace("Discord Client starting...");
 		DiscordRpc.start({
-			clientID: "863222024192262205",
+			clientID: "906551435846619146",
 			onReady: onReady,
 			onError: onError,
 			onDisconnected: onDisconnected
@@ -45,7 +45,7 @@ class DiscordClient
 			details: "In the Menus",
 			state: null,
 			largeImageKey: 'icon',
-			largeImageText: "Psych Engine"
+			largeImageText: "ProjectFNF"
 		});
 	}
 
@@ -82,7 +82,7 @@ class DiscordClient
 			details: details,
 			state: state,
 			largeImageKey: 'icon',
-			largeImageText: "Engine Version: " + MainMenuState.psychEngineVersion,
+			largeImageText: "ProjectFNF Version: " + MainMenuState.projectFnfVersion,
 			smallImageKey : smallImageKey,
 			// Obtained times are in milliseconds so they are divided so Discord can use it
 			startTimestamp : Std.int(startTimestamp / 1000),
diff --git a/source/Main.hx b/source/Main.hx
index 56be353..7696de4 100644
--- a/source/Main.hx
+++ b/source/Main.hx
@@ -117,7 +117,7 @@ class Main extends Sprite
 		dateNow = dateNow.replace(" ", "_");
 		dateNow = dateNow.replace(":", "'");
 
-		path = "./crash/" + "PsychEngine_" + dateNow + ".txt";
+		path = "./crash/" + "ProjectFNF_" + dateNow + ".txt";
 
 		for (stackItem in callStack)
 		{
@@ -130,7 +130,7 @@ class Main extends Sprite
 			}
 		}
 
-		errMsg += "\nUncaught Error: " + e.error + "\nPlease report this error to the GitHub page: https://github.com/ShadowMario/FNF-PsychEngine\n\n> Crash Handler written by: sqirra-rng";
+		errMsg += "\nUncaught Error: " + e.error + "\nPlease report this error to the GitHub page: https://github.com/l1ttleO/ProjectFNF\n\n> Crash Handler written by: sqirra-rng";
 
 		if (!FileSystem.exists("./crash/"))
 			FileSystem.createDirectory("./crash/");
diff --git a/source/MainMenuState.hx b/source/MainMenuState.hx
index 49b77b9..c3255bb 100644
--- a/source/MainMenuState.hx
+++ b/source/MainMenuState.hx
@@ -25,6 +25,7 @@ using StringTools;
 
 class MainMenuState extends MusicBeatState
 {
+	public static var projectFnfVersion:String = '2.5';
 	public static var psychEngineVersion:String = '0.6.0'; //This is also used for Discord RPC
 	public static var curSelected:Int = 0;
 
@@ -130,6 +131,10 @@ class MainMenuState extends MusicBeatState
 
 		FlxG.camera.follow(camFollowPos, null, 1);
 
+		var versionShit:FlxText = new FlxText(12, FlxG.height - 64, 0, "ProjectFNF v" + projectFnfVersion, 12);
+		versionShit.scrollFactor.set();
+		versionShit.setFormat("VCR OSD Mono", 16, FlxColor.WHITE, LEFT, FlxTextBorderStyle.OUTLINE, FlxColor.BLACK);
+		add(versionShit);
 		var versionShit:FlxText = new FlxText(12, FlxG.height - 44, 0, "Psych Engine v" + psychEngineVersion, 12);
 		versionShit.scrollFactor.set();
 		versionShit.setFormat("VCR OSD Mono", 16, FlxColor.WHITE, LEFT, FlxTextBorderStyle.OUTLINE, FlxColor.BLACK);
diff --git a/source/OutdatedState.hx b/source/OutdatedState.hx
index 0dcfe7f..ea08be7 100644
--- a/source/OutdatedState.hx
+++ b/source/OutdatedState.hx
@@ -25,11 +25,11 @@ class OutdatedState extends MusicBeatState
 
 		warnText = new FlxText(0, 0, FlxG.width,
 			"Sup bro, looks like you're running an   \n
-			outdated version of Psych Engine (" + MainMenuState.psychEngineVersion + "),\n
+			outdated version of ProjectFNF (" + MainMenuState.projectFnfVersion + "),\n
 			please update to " + TitleState.updateVersion + "!\n
 			Press ESCAPE to proceed anyway.\n
 			\n
-			Thank you for using the Engine!",
+			Thank you for using the Mod!",
 			32);
 		warnText.setFormat("VCR OSD Mono", 32, FlxColor.WHITE, CENTER);
 		warnText.screenCenter(Y);
@@ -41,7 +41,7 @@ class OutdatedState extends MusicBeatState
 		if(!leftState) {
 			if (controls.ACCEPT) {
 				leftState = true;
-				CoolUtil.browserLoad("https://github.com/ShadowMario/FNF-PsychEngine/releases");
+				CoolUtil.browserLoad("https://github.com/l1ttleO/ProjectFNF/releases/latest");
 			}
 			else if(controls.BACK) {
 				leftState = true;
diff --git a/source/PlayState.hx b/source/PlayState.hx
index cf783ee..1afdec1 100644
--- a/source/PlayState.hx
+++ b/source/PlayState.hx
@@ -1182,6 +1182,11 @@ class PlayState extends MusicBeatState
 			botplayTxt.y = timeBarBG.y - 78;
 		}
 
+		var versionTxt:FlxText = new FlxText(4, FlxG.height - 24, 0, '${SONG.song} - ${CoolUtil.difficultyString()} | ProjectFNF v${MainMenuState.projectFnfVersion}', 12);
+		versionTxt.scrollFactor.set();
+		versionTxt.setFormat(Paths.font("vcr.ttf"), 16, FlxColor.WHITE, LEFT, FlxTextBorderStyle.OUTLINE, FlxColor.BLACK);
+		add(versionTxt);
+
 		strumLineNotes.cameras = [camHUD];
 		grpNoteSplashes.cameras = [camHUD];
 		notes.cameras = [camHUD];
@@ -1195,6 +1200,7 @@ class PlayState extends MusicBeatState
 		timeBarBG.cameras = [camHUD];
 		timeTxt.cameras = [camHUD];
 		doof.cameras = [camHUD];
+		versionTxt.cameras = [camHUD];
 
 		// if (SONG.song == 'South')
 		// FlxG.camera.alpha = 0.7;
diff --git a/source/TitleState.hx b/source/TitleState.hx
index c6a88ee..f5676c8 100644
--- a/source/TitleState.hx
+++ b/source/TitleState.hx
@@ -117,7 +117,7 @@ class TitleState extends MusicBeatState
 		#if CHECK_FOR_UPDATES
 		if(!closedState) {
 			trace('checking for update');
-			var http = new haxe.Http("https://raw.githubusercontent.com/ShadowMario/FNF-PsychEngine/main/gitVersion.txt");
+			var http = new haxe.Http("https://raw.githubusercontent.com/l1ttleO/ProjectFNF/main/gitVersion.txt");
 
 			http.onData = function (data:String)
 			{
@@ -231,6 +231,7 @@ class TitleState extends MusicBeatState
 		#end
 	}
 
+	var logo:FlxSprite;
 	var logoBl:FlxSprite;
 	var gfDance:FlxSprite;
 	var danceLeft:Bool = false;
@@ -283,6 +284,7 @@ class TitleState extends MusicBeatState
 		// bg.updateHitbox();
 		add(bg);
 
+		if (FileSystem.exists(Paths.modsImages('logoBumpin')) && !FileSystem.exists(Paths.modsImages('titlelogo'))) {
 		logoBl = new FlxSprite(titleJSON.titlex, titleJSON.titley);
 		logoBl.frames = Paths.getSparrowAtlas('logoBumpin');
 
@@ -292,6 +294,10 @@ class TitleState extends MusicBeatState
 		logoBl.updateHitbox();
 		// logoBl.screenCenter();
 		// logoBl.color = FlxColor.BLACK;
+		} else {
+			logo = new FlxSprite(100, 50).loadGraphic(Paths.image('titlelogo'));
+			logo.antialiasing = ClientPrefs.globalAntialiasing;
+		}
 
 		swagShader = new ColorSwap();
 		gfDance = new FlxSprite(titleJSON.gfx, titleJSON.gfy);
@@ -332,8 +338,14 @@ class TitleState extends MusicBeatState
 
 		add(gfDance);
 		gfDance.shader = swagShader.shader;
+		if (logoBl != null) {
 		add(logoBl);
 		logoBl.shader = swagShader.shader;
+		}
+		if (logo != null) {
+			add(logo);
+			logo.shader = swagShader.shader;
+		}
 
 		titleText = new FlxSprite(titleJSON.startx, titleJSON.starty);
 		#if (desktop && MODS_ALLOWED)
@@ -623,6 +635,10 @@ class TitleState extends MusicBeatState
 		if(logoBl != null)
 			logoBl.animation.play('bump', true);
 
+		if (logo != null) {
+			logo.scale.set(1.05, 1.05);
+			FlxTween.tween(logo, {'scale.x': 0.95, 'scale.y': 0.95}, 0.1, {ease: FlxEase.bounceIn});
+		}
 		if(gfDance != null) {
 			danceLeft = !danceLeft;
 			if (danceLeft)
@@ -640,14 +656,20 @@ class TitleState extends MusicBeatState
 					FlxG.sound.playMusic(Paths.music('freakyMenu'), 0);
 					FlxG.sound.music.fadeIn(4, 0, 0.7);
 				case 2:
-					#if PSYCH_WATERMARKS
+					#if PROJECTFNF_WATERMARKS
+					createCoolText(['ProjectFNF by'], 15);
+					#elseif PSYCH_WATERMARKS
 					createCoolText(['Psych Engine by'], 15);
 					#else
 					createCoolText(['ninjamuffin99', 'phantomArcade', 'kawaisprite', 'evilsk8er']);
 					#end
 				// credTextShit.visible = true;
 				case 4:
-					#if PSYCH_WATERMARKS
+					#if PROJECTFNF_WATERMARKS
+					addMoreText('l1ttleO', 15);
+					addMoreText('BeastlyGhost', 15);
+					addMoreText('aflac', 15);
+					#elseif PSYCH_WATERMARKS
 					addMoreText('Shadow Mario', 15);
 					addMoreText('RiverOaken', 15);
 					addMoreText('shubs', 15);
@@ -662,7 +684,7 @@ class TitleState extends MusicBeatState
 				// credTextShit.text = 'In association \nwith';
 				// credTextShit.screenCenter();
 				case 6:
-					#if PSYCH_WATERMARKS
+					#if (PROJECTFNF_WATERMARKS || PSYCH_WATERMARKS)
 					createCoolText(['Not associated', 'with'], -40);
 					#else
 					createCoolText(['In association', 'with'], -40);
-- 
2.34.1.windows.1

